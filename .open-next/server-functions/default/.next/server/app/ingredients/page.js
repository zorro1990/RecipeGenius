(()=>{var e={};e.id=653,e.ids=[653],e.modules={299:(e,s,t)=>{Promise.resolve().then(t.bind(t,3938))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3938:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/ingredients/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/ingredients/page.tsx","default")},5336:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5910:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>l,tU:()=>n});var a=t(687);t(3210);var r=t(1320),i=t(6241);function n({className:e,...s}){return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",e),...s})}function l({className:e,...s}){return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function c({className:e,...s}){return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function o({className:e,...s}){return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",e),...s})}},6085:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},7091:(e,s,t)=>{Promise.resolve().then(t.bind(t,9538))},7282:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o});var a=t(5239),r=t(8088),i=t(8170),n=t.n(i),l=t(893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o={children:["",{children:["ingredients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3938)),"/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/ingredients/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/ingredients/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/ingredients/page",pathname:"/ingredients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9538:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eJ});var a=t(687),r=t(3210),i=t(6189),n=t(5192),l=t(4934),c=t(5910),o=t(8988),d=t(9821),m=t(6234),u=t(2688);let x=(0,u.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),p=(0,u.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=t(6085),g=t(8233),j=t(1860),f=t(6241);let v={vegetables:{name:"蔬菜类",icon:"\uD83E\uDD6C",items:["白菜","菠菜","生菜","芹菜","韭菜","小白菜","油菜","茼蒿"]},roots:{name:"根茎类",icon:"\uD83E\uDD55",items:["土豆","红薯","胡萝卜","白萝卜","洋葱","大蒜","生姜","莲藕"]},proteins:{name:"蛋白质",icon:"\uD83E\uDD69",items:["鸡蛋","鸡肉","猪肉","牛肉","鱼肉","虾","豆腐","腊肉"]},seasonings:{name:"调料类",icon:"\uD83E\uDDC2",items:["盐","生抽","老抽","料酒","醋","糖","胡椒粉","花椒"]},others:{name:"其他",icon:"\uD83C\uDF36️",items:["青椒","红椒","西红柿","黄瓜","茄子","豆角","冬瓜","南瓜"]}};function N({onIngredientsChange:e,initialIngredients:s=[]}){let[t,i]=(0,r.useState)(s),[c,u]=(0,r.useState)(""),[N,b]=(0,r.useState)(null),[y,w]=(0,r.useState)(!1),[A,k]=(0,r.useState)([]),[z,S]=(0,r.useState)(null),I=(0,r.useRef)(null),R=s=>{b(null);let a=s||c.trim();if(!a)return void b("请输入食材名称");if(!(0,f.o1)(a))return void b("食材名称长度应在1-50个字符之间");if(t.includes(a))return void b("该食材已经添加过了");let r=[...t,a];i(r),e(r),u(""),w(!1),I.current?.focus()},C=s=>{let a=t.filter((e,t)=>t!==s);i(a),e(a)},_=s=>{let a=(0,f.iX)([...t,...s.split(/[,，、\n]/)]);i(a),e(a)},P=e=>{t.includes(e)||R(e)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Zp,{className:"border-2 border-dashed border-orange-200 bg-orange-50/30",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.A,{className:"size-8 text-orange-500 mx-auto mb-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"添加你的食材"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"输入现有食材，AI将为你推荐最佳搭配"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-5"}),(0,a.jsx)(o.p,{ref:I,placeholder:"搜索或输入食材名称...",value:c,onChange:e=>{u(e.target.value),b(null)},onKeyPress:e=>{"Enter"===e.key?(e.preventDefault(),R()):"Escape"===e.key&&w(!1)},onFocus:()=>c&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"pl-10 h-12 text-base border-2 focus:border-orange-400",maxLength:50}),y&&A.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:A.map((e,s)=>(0,a.jsx)("button",{className:"w-full px-4 py-2 text-left hover:bg-orange-50 transition-colors border-b border-gray-100 last:border-b-0",onClick:()=>R(e),children:(0,a.jsx)("span",{className:"text-gray-700",children:e})},s))})]}),(0,a.jsxs)(l.$,{onClick:()=>R(),size:"lg",disabled:!c.trim(),className:"h-12 px-6 bg-orange-500 hover:bg-orange-600",children:[(0,a.jsx)(p,{className:"size-5 mr-2"}),"添加"]})]}),N&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:N})})]})]})})}),t.length>0?(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"size-5 text-green-500"}),(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["已选食材 (",t.length,")"]})]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{i([]),e([])},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,a.jsx)(g.A,{className:"size-4 mr-1"}),"清空"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:t.map((e,s)=>(0,a.jsxs)(d.E,{variant:"secondary",className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-100 text-green-800 hover:bg-green-200 transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:e}),(0,a.jsx)(j.A,{className:"size-4 cursor-pointer hover:text-red-600 transition-colors",onClick:()=>C(s)})]},s))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["\uD83D\uDCA1 已有 ",t.length," 种食材，可以生成丰富的菜谱了！继续添加更多食材获得更多选择。"]})})]})}):(0,a.jsx)(n.Zp,{className:"border-dashed border-gray-300",children:(0,a.jsx)(n.Wu,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83E\uDD55"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"还没有添加任何食材"}),(0,a.jsx)("p",{className:"text-sm",children:"开始输入你现有的食材，让AI为你创造美味菜谱！"})]})})}),(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFEA"}),"快速添加常见食材"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(v).map(([e,s])=>(0,a.jsxs)(l.$,{variant:z===e?"default":"outline",size:"sm",onClick:()=>S(z===e?null:e),className:"text-sm",children:[(0,a.jsx)("span",{className:"mr-1",children:s.icon}),s.name]},e))}),z?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)("span",{children:v[z].icon}),v[z].name]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:v[z].items.map(e=>(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>P(e),disabled:t.includes(e),className:`text-sm transition-all ${t.includes(e)?"opacity-50 cursor-not-allowed":"hover:bg-orange-50 hover:border-orange-300"}`,children:[e,t.includes(e)&&(0,a.jsx)("span",{className:"ml-1 text-green-500",children:"✓"})]},e))})]}):(0,a.jsx)("div",{className:"text-center py-6 text-gray-500",children:(0,a.jsx)("p",{className:"text-sm",children:"选择一个分类查看相关食材"})})]})})}),(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"}),"批量输入食材"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"粘贴食材清单，支持逗号、换行或顿号分隔，一次性添加多个食材"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{placeholder:"例如：鸡蛋、西红柿、土豆 洋葱，大蒜，生姜 胡萝卜、青椒",className:"w-full p-4 border-2 border-gray-200 rounded-lg resize-none focus:border-orange-400 focus:outline-none transition-colors",rows:4,onBlur:e=>{e.target.value.trim()&&(_(e.target.value),e.target.value="")}}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"支持的分隔符："}),(0,a.jsx)("p",{children:"• 逗号（,）• 中文逗号（，）• 顿号（、）• 换行"})]})]})]})})})]})}function b(e,[s,t]){return Math.min(t,Math.max(s,e))}var y=t(569),w=t(8599),A=t(1273),k=t(5551),z=t(43),S=t(6156),I=t(4163),R=t(9510),C=["PageUp","PageDown"],_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],P={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},D="Slider",[E,M,T]=(0,R.N)(D),[$,B]=(0,A.A)(D,[T]),[Z,O]=$(D),U=r.forwardRef((e,s)=>{let{name:t,min:i=0,max:n=100,step:l=1,orientation:c="horizontal",disabled:o=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[i],value:u,onValueChange:x=()=>{},onValueCommit:p=()=>{},inverted:h=!1,form:g,...j}=e,f=r.useRef(new Set),v=r.useRef(0),N="horizontal"===c,[w=[],A]=(0,k.i)({prop:u,defaultProp:m,onChange:e=>{let s=[...f.current];s[v.current]?.focus(),x(e)}}),z=r.useRef(w);function S(e,s,{commit:t}={commit:!1}){let a=(String(l).split(".")[1]||"").length,r=b(function(e,s){let t=Math.pow(10,s);return Math.round(e*t)/t}(Math.round((e-i)/l)*l+i,a),[i,n]);A((e=[])=>{let a=function(e=[],s,t){let a=[...e];return a[t]=s,a.sort((e,s)=>e-s)}(e,r,s);if(!function(e,s){if(s>0)return Math.min(...e.slice(0,-1).map((s,t)=>e[t+1]-s))>=s;return!0}(a,d*l))return e;{v.current=a.indexOf(r);let s=String(a)!==String(e);return s&&t&&p(a),s?a:e}})}return(0,a.jsx)(Z,{scope:e.__scopeSlider,name:t,disabled:o,min:i,max:n,valueIndexToChangeRef:v,thumbs:f.current,values:w,orientation:c,form:g,children:(0,a.jsx)(E.Provider,{scope:e.__scopeSlider,children:(0,a.jsx)(E.Slot,{scope:e.__scopeSlider,children:(0,a.jsx)(N?q:K,{"aria-disabled":o,"data-disabled":o?"":void 0,...j,ref:s,onPointerDown:(0,y.m)(j.onPointerDown,()=>{o||(z.current=w)}),min:i,max:n,inverted:h,onSlideStart:o?void 0:function(e){let s=function(e,s){if(1===e.length)return 0;let t=e.map(e=>Math.abs(e-s)),a=Math.min(...t);return t.indexOf(a)}(w,e);S(e,s)},onSlideMove:o?void 0:function(e){S(e,v.current)},onSlideEnd:o?void 0:function(){let e=z.current[v.current];w[v.current]!==e&&p(w)},onHomeKeyDown:()=>!o&&S(i,0,{commit:!0}),onEndKeyDown:()=>!o&&S(n,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:s})=>{if(!o){let t=C.includes(e.key)||e.shiftKey&&_.includes(e.key),a=v.current;S(w[a]+l*(t?10:1)*s,a,{commit:!0})}}})})})})});U.displayName=D;var[W,G]=$(D,{startEdge:"left",endEdge:"right",size:"width",direction:1}),q=r.forwardRef((e,s)=>{let{min:t,max:i,dir:n,inverted:l,onSlideStart:c,onSlideMove:o,onSlideEnd:d,onStepKeyDown:m,...u}=e,[x,p]=r.useState(null),h=(0,w.s)(s,e=>p(e)),g=r.useRef(void 0),j=(0,z.jH)(n),f="ltr"===j,v=f&&!l||!f&&l;function N(e){let s=g.current||x.getBoundingClientRect(),a=et([0,s.width],v?[t,i]:[i,t]);return g.current=s,a(e-s.left)}return(0,a.jsx)(W,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:(0,a.jsx)(L,{dir:j,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let s=N(e.clientX);c?.(s)},onSlideMove:e=>{let s=N(e.clientX);o?.(s)},onSlideEnd:()=>{g.current=void 0,d?.()},onStepKeyDown:e=>{let s=P[v?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:s?-1:1})}})})}),K=r.forwardRef((e,s)=>{let{min:t,max:i,inverted:n,onSlideStart:l,onSlideMove:c,onSlideEnd:o,onStepKeyDown:d,...m}=e,u=r.useRef(null),x=(0,w.s)(s,u),p=r.useRef(void 0),h=!n;function g(e){let s=p.current||u.current.getBoundingClientRect(),a=et([0,s.height],h?[i,t]:[t,i]);return p.current=s,a(e-s.top)}return(0,a.jsx)(W,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:(0,a.jsx)(L,{"data-orientation":"vertical",...m,ref:x,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let s=g(e.clientY);l?.(s)},onSlideMove:e=>{let s=g(e.clientY);c?.(s)},onSlideEnd:()=>{p.current=void 0,o?.()},onStepKeyDown:e=>{let s=P[h?"from-bottom":"from-top"].includes(e.key);d?.({event:e,direction:s?-1:1})}})})}),L=r.forwardRef((e,s)=>{let{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:n,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:o,...d}=e,m=O(D,t);return(0,a.jsx)(I.sG.span,{...d,ref:s,onKeyDown:(0,y.m)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):C.concat(_).includes(e.key)&&(o(e),e.preventDefault())}),onPointerDown:(0,y.m)(e.onPointerDown,e=>{let s=e.target;s.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(s)?s.focus():r(e)}),onPointerMove:(0,y.m)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:(0,y.m)(e.onPointerUp,e=>{let s=e.target;s.hasPointerCapture(e.pointerId)&&(s.releasePointerCapture(e.pointerId),n(e))})})}),F="SliderTrack",H=r.forwardRef((e,s)=>{let{__scopeSlider:t,...r}=e,i=O(F,t);return(0,a.jsx)(I.sG.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:s})});H.displayName=F;var V="SliderRange",X=r.forwardRef((e,s)=>{let{__scopeSlider:t,...i}=e,n=O(V,t),l=G(V,t),c=r.useRef(null),o=(0,w.s)(s,c),d=n.values.length,m=n.values.map(e=>es(e,n.min,n.max)),u=d>1?Math.min(...m):0,x=100-Math.max(...m);return(0,a.jsx)(I.sG.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...i,ref:o,style:{...e.style,[l.startEdge]:u+"%",[l.endEdge]:x+"%"}})});X.displayName=V;var J="SliderThumb",Y=r.forwardRef((e,s)=>{let t=M(e.__scopeSlider),[i,n]=r.useState(null),l=(0,w.s)(s,e=>n(e)),c=r.useMemo(()=>i?t().findIndex(e=>e.ref.current===i):-1,[t,i]);return(0,a.jsx)(Q,{...e,ref:l,index:c})}),Q=r.forwardRef((e,s)=>{let{__scopeSlider:t,index:i,name:n,...l}=e,c=O(J,t),o=G(J,t),[d,m]=r.useState(null),u=(0,w.s)(s,e=>m(e)),x=!d||c.form||!!d.closest("form"),p=function(e){let[s,t]=r.useState(void 0);return(0,S.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let a,r;if(!Array.isArray(s)||!s.length)return;let i=s[0];if("borderBoxSize"in i){let e=i.borderBoxSize,s=Array.isArray(e)?e[0]:e;a=s.inlineSize,r=s.blockSize}else a=e.offsetWidth,r=e.offsetHeight;t({width:a,height:r})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}(d),h=c.values[i],g=void 0===h?0:es(h,c.min,c.max),j=function(e,s){return s>2?`Value ${e+1} of ${s}`:2===s?["Minimum","Maximum"][e]:void 0}(i,c.values.length),f=p?.[o.size],v=f?function(e,s,t){let a=e/2,r=et([0,50],[0,a]);return(a-r(s)*t)*t}(f,g,o.direction):0;return r.useEffect(()=>{if(d)return c.thumbs.add(d),()=>{c.thumbs.delete(d)}},[d,c.thumbs]),(0,a.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${v}px)`},children:[(0,a.jsx)(E.ItemSlot,{scope:e.__scopeSlider,children:(0,a.jsx)(I.sG.span,{role:"slider","aria-label":e["aria-label"]||j,"aria-valuemin":c.min,"aria-valuenow":h,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:u,style:void 0===h?{display:"none"}:e.style,onFocus:(0,y.m)(e.onFocus,()=>{c.valueIndexToChangeRef.current=i})})}),x&&(0,a.jsx)(ee,{name:n??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:h},i)]})});Y.displayName=J;var ee=r.forwardRef(({__scopeSlider:e,value:s,...t},i)=>{let n=r.useRef(null),l=(0,w.s)(n,i),c=function(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}(s);return r.useEffect(()=>{let e=n.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(c!==s&&t){let a=new Event("input",{bubbles:!0});t.call(e,s),e.dispatchEvent(a)}},[c,s]),(0,a.jsx)(I.sG.input,{style:{display:"none"},...t,ref:l,defaultValue:s})});function es(e,s,t){return b(100/(t-s)*(e-s),[0,100])}function et(e,s){return t=>{if(e[0]===e[1]||s[0]===s[1])return s[0];let a=(s[1]-s[0])/(e[1]-e[0]);return s[0]+a*(t-e[0])}}function ea({className:e,defaultValue:s,value:t,min:i=0,max:n=100,...l}){let c=r.useMemo(()=>Array.isArray(t)?t:Array.isArray(s)?s:[i,n],[t,s,i,n]);return(0,a.jsxs)(U,{"data-slot":"slider",defaultValue:s,value:t,min:i,max:n,className:(0,f.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[(0,a.jsx)(H,{"data-slot":"slider-track",className:(0,f.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,a.jsx)(X,{"data-slot":"slider-range",className:(0,f.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(e,s)=>(0,a.jsx)(Y,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}ee.displayName="RadioBubbleInput";let er=["素食","纯素食","无麸质","低卡路里","低盐","低糖","高蛋白","生酮饮食"],ei=["中式","西式","日式","韩式","泰式","意式","法式","印度菜","墨西哥菜"],en=["花生","坚果","牛奶","鸡蛋","大豆","小麦","鱼类","贝类"];var el=t(6349),ec=t(1312),eo=t(3649);function ed({onPreferencesChange:e,initialPreferences:s={}}){let[t,i]=(0,r.useState)({dietaryRestrictions:s.dietaryRestrictions||[],cuisineType:s.cuisineType||[],cookingTime:s.cookingTime||30,servings:s.servings||2,difficulty:s.difficulty||"easy",allergies:s.allergies||[]}),c=s=>{let a={...t,...s};i(a),e(a)},o=(e,s)=>e.includes(s)?e.filter(e=>e!==s):[...e,s];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(el.A,{className:"size-5 text-blue-500"}),"烹饪时间和份数"]}),(0,a.jsx)(n.BT,{children:"设置你的时间限制和用餐人数"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center justify-between",children:[(0,a.jsx)("span",{children:"最大烹饪时间"}),(0,a.jsxs)("span",{className:"text-orange-500 font-semibold",children:[t.cookingTime,"分钟"]})]}),(0,a.jsx)(ea,{value:[t.cookingTime],onValueChange:([e])=>c({cookingTime:e}),max:120,min:10,step:5,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"10分钟"}),(0,a.jsx)("span",{children:"60分钟"}),(0,a.jsx)("span",{children:"120分钟"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center justify-between",children:[(0,a.jsx)("span",{children:"用餐人数"}),(0,a.jsxs)("span",{className:"text-orange-500 font-semibold",children:[t.servings,"人"]})]}),(0,a.jsx)(ea,{value:[t.servings],onValueChange:([e])=>c({servings:e}),max:8,min:1,step:1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"1人"}),(0,a.jsx)("span",{children:"4人"}),(0,a.jsx)("span",{children:"8人"})]})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"size-5 text-green-500"}),"烹饪难度"]}),(0,a.jsx)(n.BT,{children:"选择适合你技能水平的难度"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"easy",label:"简单",desc:"基础操作"},{value:"medium",label:"中等",desc:"需要一些技巧"},{value:"hard",label:"困难",desc:"挑战性强"}].map(e=>(0,a.jsxs)(l.$,{variant:t.difficulty===e.value?"default":"outline",onClick:()=>c({difficulty:e.value}),className:"h-auto p-4 flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs opacity-70",children:e.desc})]},e.value))})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.A,{className:"size-5 text-purple-500"}),"饮食偏好"]}),(0,a.jsx)(n.BT,{children:"选择你的饮食限制和偏好"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"饮食限制"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:er.map(e=>(0,a.jsx)(d.E,{variant:t.dietaryRestrictions.includes(e)?"default":"outline",className:"cursor-pointer hover:bg-primary/80",onClick:()=>c({dietaryRestrictions:o(t.dietaryRestrictions,e)}),children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"菜系偏好"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:ei.map(e=>(0,a.jsx)(d.E,{variant:t.cuisineType.includes(e)?"default":"outline",className:"cursor-pointer hover:bg-primary/80",onClick:()=>c({cuisineType:o(t.cuisineType,e)}),children:e},e))})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.A,{className:"size-5 text-red-500"}),"过敏原提醒"]}),(0,a.jsx)(n.BT,{children:"选择你需要避免的过敏原"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:en.map(e=>(0,a.jsx)(d.E,{variant:t.allergies?.includes(e)?"destructive":"outline",className:"cursor-pointer",onClick:()=>c({allergies:o(t.allergies||[],e)}),children:e},e))}),t.allergies&&t.allergies.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm text-red-700",children:["⚠️ 已选择过敏原：",t.allergies.join("、")]}),(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"生成的菜谱将避免使用这些食材"})]})]})]}),(0,a.jsxs)(n.Zp,{className:"bg-orange-50 border-orange-200",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-orange-800",children:"偏好总结"})}),(0,a.jsx)(n.Wu,{className:"text-sm text-orange-700",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"烹饪时间："}),t.cookingTime,"分钟以内"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"用餐人数："}),t.servings,"人"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"难度："}),"easy"===t.difficulty?"简单":"medium"===t.difficulty?"中等":"困难"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"限制："}),t.dietaryRestrictions.length>0?t.dietaryRestrictions.join("、"):"无特殊限制"]})]})})]})]})}var em=t(6184),eu=t(4027),ex=t(5336),ep=t(350);function eh({onOpenSettings:e,className:s=""}){let[t,i]=(0,r.useState)(!1),[n,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1);if(!o)return null;let m=(()=>{if(!t)return{icon:(0,a.jsx)(eu.A,{className:"size-4 text-orange-500"}),text:"配置AI服务",variant:"outline",description:"点击配置AI提供商",className:"border-orange-200 text-orange-700 hover:bg-orange-50"};if(1===n.length){let e=n[0],s=ep.API_PROVIDERS[e];return{icon:(0,a.jsx)(ex.A,{className:"size-4 text-green-500"}),text:`AI已就绪`,variant:"outline",description:`使用${s?.name||e}`,className:"border-green-200 text-green-700 hover:bg-green-50"}}return{icon:(0,a.jsx)(ex.A,{className:"size-4 text-blue-500"}),text:`${n.length}个AI服务`,variant:"outline",description:"多个提供商已配置",className:"border-blue-200 text-blue-700 hover:bg-blue-50"}})();return(0,a.jsxs)(l.$,{variant:m.variant,size:"sm",onClick:e,className:`flex items-center gap-2 h-auto px-3 py-2 ${m.className||""} ${s}`,title:m.description,children:[m.icon,(0,a.jsx)("span",{className:"text-sm font-medium",children:m.text})]})}var eg="Progress",[ej,ef]=(0,A.A)(eg),[ev,eN]=ej(eg),eb=r.forwardRef((e,s)=>{var t,r;let{__scopeProgress:i,value:n=null,max:l,getValueLabel:c=eA,...o}=e;(l||0===l)&&!eS(l)&&console.error((t=`${l}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let d=eS(l)?l:100;null===n||eI(n,d)||console.error((r=`${n}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=eI(n,d)?n:null,u=ez(m)?c(m,d):void 0;return(0,a.jsx)(ev,{scope:i,value:m,max:d,children:(0,a.jsx)(I.sG.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":ez(m)?m:void 0,"aria-valuetext":u,role:"progressbar","data-state":ek(m,d),"data-value":m??void 0,"data-max":d,...o,ref:s})})});eb.displayName=eg;var ey="ProgressIndicator",ew=r.forwardRef((e,s)=>{let{__scopeProgress:t,...r}=e,i=eN(ey,t);return(0,a.jsx)(I.sG.div,{"data-state":ek(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:s})});function eA(e,s){return`${Math.round(e/s*100)}%`}function ek(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function ez(e){return"number"==typeof e}function eS(e){return ez(e)&&!isNaN(e)&&e>0}function eI(e,s){return ez(e)&&!isNaN(e)&&e<=s&&e>=0}ew.displayName=ey;let eR=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(eb,{ref:r,className:(0,f.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...t,children:(0,a.jsx)(ew,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));eR.displayName=eb.displayName;let eC=(0,t(4224).F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),e_=r.forwardRef(({className:e,variant:s,...t},r)=>(0,a.jsx)("div",{ref:r,role:"alert",className:(0,f.cn)(eC({variant:s}),e),...t}));e_.displayName="Alert",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,f.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let eP=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,f.cn)("text-sm [&_p]:leading-relaxed",e),...s}));eP.displayName="AlertDescription";var eD=t(1862);let eE=(0,u.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),eM=(0,u.A)("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),eT=(0,u.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var e$=t(3613);function eB({onImageSelect:e,onImageRemove:s,isUploading:t=!1,maxSizeInMB:i=5,acceptedFormats:c=["image/jpeg","image/png","image/webp"],className:o=""}){let[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(0),v=(0,r.useRef)(null),N=(0,r.useCallback)(async(e,s=.8)=>new Promise(t=>{let a=document.createElement("canvas"),r=a.getContext("2d"),i=new Image;i.onload=()=>{let{width:e,height:n}=i;e>n?e>1024&&(n=1024*n/e,e=1024):n>1024&&(e=1024*e/n,n=1024),a.width=e,a.height=n,r?.drawImage(i,0,0,e,n),t(a.toDataURL("image/jpeg",s))},i.src=URL.createObjectURL(e)}),[]),b=(0,r.useCallback)(e=>{if(!c.includes(e.type))return`不支持的文件格式。请选择 ${c.map(e=>e.split("/")[1].toUpperCase()).join(", ")} 格式的图片。`;let s=1024*i*1024;return e.size>s?`文件大小超过限制。请选择小于 ${i}MB 的图片。`:null},[c,i]),y=(0,r.useCallback)(async s=>{h(null),f(0);let t=b(s);if(t)return void h(t);try{let t=URL.createObjectURL(s),a=setInterval(()=>{f(e=>e>=90?(clearInterval(a),90):e+10)},100),r=await N(s),i=Math.round(3*r.length/4);clearInterval(a),f(100);let n={file:s,dataUrl:t,compressedDataUrl:r,originalSize:s.size,compressedSize:i};m(n),e(s,r),setTimeout(()=>f(0),1e3)}catch(e){console.error("图片处理失败:",e),h("图片处理失败，请重试。"),f(0)}},[b,N,e]),w=(0,r.useCallback)(e=>{e.preventDefault(),x(!0)},[]),A=(0,r.useCallback)(e=>{e.preventDefault(),x(!1)},[]),k=(0,r.useCallback)(e=>{e.preventDefault(),x(!1);let s=Array.from(e.dataTransfer.files);s.length>0&&y(s[0])},[y]),z=(0,r.useCallback)(()=>{v.current?.click()},[]),S=(0,r.useCallback)(e=>{let s=e.target.files;s&&s.length>0&&y(s[0])},[y]),I=(0,r.useCallback)(()=>{m(null),h(null),f(0),v.current&&(v.current.value=""),s()},[s]),R=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,a.jsxs)("div",{className:`space-y-4 ${o}`,children:[!d&&(0,a.jsx)(n.Zp,{className:`border-2 border-dashed transition-all duration-200 cursor-pointer hover:border-primary/50 ${u?"border-primary bg-primary/5":"border-gray-300"} ${t?"pointer-events-none opacity-50":""}`,onDragOver:w,onDragLeave:A,onDrop:k,onClick:z,children:(0,a.jsxs)(n.Wu,{className:"flex flex-col items-center justify-center p-8 text-center",children:[t?(0,a.jsx)(eD.A,{className:"size-12 text-primary animate-spin mb-4"}):(0,a.jsx)("div",{className:"flex items-center justify-center size-16 bg-primary/10 rounded-full mb-4",children:(0,a.jsx)(eE,{className:"size-8 text-primary"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:t?"识别中...":"上传食材图片"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:t?"AI正在识别图片中的食材，请稍候...":"拖拽图片到此处，或点击选择文件"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eM,{className:"size-4"}),(0,a.jsx)("span",{children:"JPG, PNG, WebP"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eT,{className:"size-4"}),(0,a.jsxs)("span",{children:["最大 ",i,"MB"]})]})]})]})}),g>0&&g<100&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"正在处理图片..."}),(0,a.jsxs)("span",{children:[g,"%"]})]}),(0,a.jsx)(eR,{value:g,className:"h-2"})]}),d&&(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:d.dataUrl,alt:"预览",className:"w-24 h-24 object-cover rounded-lg border"}),(0,a.jsx)(l.$,{variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:I,children:(0,a.jsx)(j.A,{className:"size-3"})})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:d.file.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["原始大小: ",R(d.originalSize)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["压缩后: ",R(d.compressedSize),(0,a.jsxs)("span",{className:"text-green-600 ml-1",children:["(节省 ",Math.round((1-d.compressedSize/d.originalSize)*100),"%)"]})]})]}),t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(eD.A,{className:"size-4 animate-spin"}),(0,a.jsx)("span",{children:"AI正在识别食材..."})]})]})]})})}),p&&(0,a.jsxs)(e_,{variant:"destructive",children:[(0,a.jsx)(e$.A,{className:"size-4"}),(0,a.jsx)(eP,{children:p})]}),(0,a.jsx)("input",{ref:v,type:"file",accept:c.join(","),onChange:S,className:"hidden"})]})}var eZ=t(3964);let eO=(0,u.A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var eU=t(2597),eW=t(3861);function eG({result:e,onConfirm:s,onRetry:t,onCancel:i,isLoading:c=!1,className:m=""}){var u,x;let[f,v]=(0,r.useState)(e.ingredients),[N,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(null),[A,k]=(0,r.useState)(""),[z,S]=(0,r.useState)(!0),I=(0,r.useCallback)(()=>{N.trim()&&!f.includes(N.trim())&&(v(e=>[...e,N.trim()]),b(""))},[N,f]),R=(0,r.useCallback)(e=>{v(s=>s.filter((s,t)=>t!==e))},[]),C=(0,r.useCallback)(e=>{w(e),k(f[e])},[f]),_=(0,r.useCallback)(()=>{null!==y&&A.trim()&&v(e=>e.map((e,s)=>s===y?A.trim():e)),w(null),k("")},[y,A]),P=(0,r.useCallback)(()=>{w(null),k("")},[]),D=(0,r.useCallback)(e=>{f.includes(e)||v(s=>[...s,e])},[f]),E=(0,r.useCallback)(()=>{s(f.filter(e=>e.trim().length>0))},[f,s]);return(0,a.jsxs)("div",{className:`space-y-4 ${m}`,children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"size-5 text-primary"}),"AI识别结果"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.E,{variant:"outline",className:(u=e.confidence)>=.8?"text-green-600":u>=.6?"text-yellow-600":"text-red-600",children:[(100*e.confidence).toFixed(0),"% 准确度"]}),e.processingTime&&(0,a.jsxs)(d.E,{variant:"outline",className:"text-gray-600",children:[(0,a.jsx)(el.A,{className:"size-3 mr-1"}),(e.processingTime/1e3).toFixed(1),"s"]})]})]})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"图片描述："}),(0,a.jsx)("p",{className:"text-sm bg-gray-50 p-2 rounded",children:e.description})]}),e.confidence<.6&&(0,a.jsxs)(e_,{children:[(0,a.jsx)(e$.A,{className:"size-4"}),(0,a.jsxs)(eP,{children:[(x=e.confidence)>=.8?"识别准确度高":x>=.6?"识别准确度中等":"识别准确度较低，请仔细检查","，建议手动检查和调整识别结果。"]})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["识别的食材 (",f.length,")"]}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:t,disabled:c,children:"重新识别"})]})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[f.map((e,s)=>(0,a.jsx)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:y===s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.p,{value:A,onChange:e=>k(e.target.value),className:"flex-1",onKeyDown:e=>{"Enter"===e.key&&_(),"Escape"===e.key&&P()},autoFocus:!0}),(0,a.jsx)(l.$,{size:"sm",variant:"ghost",onClick:_,children:(0,a.jsx)(eZ.A,{className:"size-4"})}),(0,a.jsx)(l.$,{size:"sm",variant:"ghost",onClick:P,children:(0,a.jsx)(j.A,{className:"size-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex-1",children:e}),(0,a.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>C(s),children:(0,a.jsx)(eO,{className:"size-4"})}),(0,a.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>R(s),children:(0,a.jsx)(g.A,{className:"size-4"})})]})},s)),0===f.length&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"暂无食材，请添加或重新识别"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.p,{placeholder:"手动添加食材...",value:N,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"===e.key&&I()}}),(0,a.jsx)(l.$,{onClick:I,disabled:!N.trim(),children:(0,a.jsx)(p,{className:"size-4"})})]})]})]}),e.suggestions&&e.suggestions.length>0&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"建议添加的食材"}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>S(!z),children:z?(0,a.jsx)(eU.A,{className:"size-4"}):(0,a.jsx)(eW.A,{className:"size-4"})})]})}),z&&(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.suggestions.map((e,s)=>(0,a.jsxs)(d.E,{variant:"outline",className:`cursor-pointer hover:bg-primary hover:text-primary-foreground ${f.includes(e)?"bg-primary text-primary-foreground":""}`,onClick:()=>D(e),children:[e,!f.includes(e)&&(0,a.jsx)(p,{className:"size-3 ml-1"})]},s))})})]}),e.categories&&e.categories.length>0&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsx)(n.ZB,{children:"食材分类"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.categories.map((e,s)=>(0,a.jsx)(d.E,{variant:"secondary",children:e},s))})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsxs)(l.$,{onClick:E,disabled:0===f.length||c,className:"flex-1",children:[(0,a.jsx)(ex.A,{className:"size-4 mr-2"}),"确认使用这些食材 (",f.length,")"]}),(0,a.jsx)(l.$,{variant:"outline",onClick:i,disabled:c,children:"取消"})]}),(0,a.jsxs)(e_,{children:[(0,a.jsx)(e$.A,{className:"size-4"}),(0,a.jsxs)(eP,{children:[(0,a.jsx)("strong",{children:"提示："}),"您可以编辑、删除或添加食材。点击编辑图标可以修改食材名称，点击垃圾桶图标可以删除。 建议的食材可以点击直接添加到列表中。确认后这些食材将自动填入菜谱生成表单。"]})]})]})}var eq=t(8122);var eK=function(e){return e.API_KEY_MISSING="api_key_missing",e.API_QUOTA_EXCEEDED="api_quota_exceeded",e.API_TIMEOUT="api_timeout",e.API_NETWORK_ERROR="api_network_error",e.IMAGE_TOO_LARGE="image_too_large",e.IMAGE_INVALID_FORMAT="image_invalid_format",e.IMAGE_CORRUPTED="image_corrupted",e.PARSING_ERROR="parsing_error",e.UNKNOWN_ERROR="unknown_error",e}({});function eL(e){return{ingredients:[],confidence:0,description:"无法自动识别，请手动添加食材",suggestions:["土豆","番茄","洋葱","鸡蛋","鸡肉","盐","糖"],categories:["蔬菜","肉类","调料"],source:"fallback"}}function eF({onIngredientsConfirmed:e,className:s=""}){let[t,i]=(0,r.useState)("idle"),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[j,f]=(0,r.useState)(0),[v,N]=(0,r.useState)(0),b=(0,r.useCallback)(async(e,s)=>{o({file:e,dataUrl:s}),x(null),i("recognizing"),f(0);try{let e=setInterval(()=>{f(s=>s>=90?(clearInterval(e),90):s+10)},200),t=(0,ep.getStoredAPIKeys)(),a=await fetch("/api/recognize-ingredients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageDataUrl:s,apiKeys:{doubao:t.doubao?{key:t.doubao,endpointId:t.doubaoEndpointId}:void 0},options:{maxRetries:2,timeout:3e4}})});if(clearInterval(e),f(100),!a.ok){let e=await a.json();throw Error(e.error||`HTTP ${a.status}: ${a.statusText}`)}let r=await a.json();if(!r.success)throw Error(r.error||"识别失败");m(r.data),i("success"),setTimeout(()=>f(0),1e3)}catch(t){console.error("食材识别失败:",t);let e=function(e){let s=("string"==typeof e?e:e.message).toLowerCase();return s.includes("api")&&(s.includes("key")||s.includes("密钥"))?"api_key_missing":s.includes("quota")||s.includes("limit")||s.includes("配额")?"api_quota_exceeded":s.includes("timeout")||s.includes("超时")?"api_timeout":s.includes("network")||s.includes("fetch")||s.includes("网络")?"api_network_error":s.includes("too large")||s.includes("过大")?"image_too_large":s.includes("format")||s.includes("格式")?"image_invalid_format":s.includes("corrupted")||s.includes("损坏")?"image_corrupted":s.includes("parse")||s.includes("json")||s.includes("解析")?"parsing_error":"unknown_error"}(t instanceof Error?t:"识别失败"),s=function(e){switch(e){case"api_key_missing":return{title:"API密钥未配置",message:"豆包视觉API密钥未配置或无效",suggestions:["点击右上角设置图标配置豆包API密钥","确保API密钥和端点ID都已正确填写","检查API密钥是否有视觉识别权限"],canRetry:!1};case"api_quota_exceeded":return{title:"API配额已用完",message:"当前API密钥的使用配额已达到限制",suggestions:["等待配额重置（通常在下个计费周期）","升级API套餐以获得更多配额","尝试使用其他API密钥","暂时使用手动输入食材功能"],canRetry:!1};case"api_timeout":return{title:"识别超时",message:"AI识别服务响应超时",suggestions:["检查网络连接是否稳定","尝试压缩图片后重新上传","稍后重试","如果问题持续，请手动输入食材"],canRetry:!0};case"api_network_error":return{title:"网络连接失败",message:"无法连接到AI识别服务",suggestions:["检查网络连接","确认防火墙没有阻止请求","稍后重试","使用手动输入食材功能"],canRetry:!0};case"image_too_large":return{title:"图片过大",message:"上传的图片文件过大",suggestions:["选择小于5MB的图片","使用图片压缩工具减小文件大小","尝试截取图片的主要部分","使用手机拍摄时选择较低分辨率"],canRetry:!1};case"image_invalid_format":return{title:"图片格式不支持",message:"上传的文件格式不受支持",suggestions:["使用JPG、PNG或WebP格式的图片","确保文件没有损坏","尝试用其他软件重新保存图片","使用手机重新拍摄"],canRetry:!1};case"image_corrupted":return{title:"图片文件损坏",message:"无法读取图片文件",suggestions:["重新选择图片文件","确保图片文件完整","尝试用其他设备打开图片确认","重新拍摄或下载图片"],canRetry:!1};case"parsing_error":return{title:"识别结果解析失败",message:"AI返回的结果格式异常",suggestions:["重试识别","尝试使用更清晰的图片","确保图片中食材清晰可见","如果问题持续，请手动输入食材"],canRetry:!0};default:return{title:"识别失败",message:"发生未知错误",suggestions:["重试识别","检查网络连接","尝试使用其他图片","使用手动输入食材功能"],canRetry:!0}}}(e);x(t instanceof Error?t.message:"识别失败，请重试"),g(s),i("error"),f(0),(e===eK.API_KEY_MISSING||e===eK.API_QUOTA_EXCEEDED)&&eL()}},[]),y=(0,r.useCallback)(()=>{o(null),m(null),x(null),g(null),i("idle"),f(0),N(0)},[]),w=(0,r.useCallback)(()=>{c&&(N(e=>e+1),x(null),g(null),b(c.file,c.dataUrl))},[c,b]),A=(0,r.useCallback)(s=>{e(s),i("confirmed"),setTimeout(()=>{let e=document.querySelector("[data-generate-button]");e&&!e.disabled&&e.click()},500)},[e]),k=(0,r.useCallback)(()=>{y()},[y]);return(0,a.jsxs)("div",{className:`space-y-6 ${s}`,children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(eT,{className:"size-6 text-primary"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"AI图片食材识别"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"上传食材图片，AI将自动识别其中的食材并生成菜谱"})]}),"idle"===t&&(0,a.jsx)(eB,{onImageSelect:b,onImageRemove:y,isUploading:!1,maxSizeInMB:5,acceptedFormats:["image/jpeg","image/png","image/webp"]}),"recognizing"===t&&(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eD.A,{className:"size-12 text-primary animate-spin"}),(0,a.jsx)(h.A,{className:"size-6 text-yellow-500 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"AI正在识别食材..."}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"请稍候，这通常需要几秒钟时间"})]}),j>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"识别进度"}),(0,a.jsxs)("span",{children:[j,"%"]})]}),(0,a.jsx)(eR,{value:j,className:"h-2"})]}),(0,a.jsx)(l.$,{variant:"outline",onClick:k,disabled:j>50,children:"取消"})]})})}),"success"===t&&d&&(0,a.jsx)(eG,{result:d,onConfirm:A,onRetry:w,onCancel:k,isLoading:!1}),"confirmed"===t&&d&&(0,a.jsx)(n.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[(0,a.jsx)(ex.A,{className:"size-6"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"食材已确认"})]}),(0,a.jsx)("p",{className:"text-green-600 text-sm",children:"已成功识别并添加食材到您的列表中，现在可以生成菜谱了！"}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(l.$,{onClick:()=>{o(null),m(null),x(null),i("idle")},variant:"outline",size:"sm",children:"重新识别"}),(0,a.jsxs)(l.$,{onClick:()=>{let e=document.querySelector("[data-generate-button]");e&&!e.disabled?e.click():e?.scrollIntoView({behavior:"smooth",block:"center"})},className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(h.A,{className:"size-4 mr-2"}),"立即生成菜谱"]})]})]})})}),"error"===t&&p&&(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)(e_,{variant:"destructive",children:[(0,a.jsx)(e$.A,{className:"size-4"}),(0,a.jsx)(eP,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:p.title}),(0,a.jsx)("p",{className:"mt-1 text-sm",children:p.message}),v>0&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["已重试 ",v," 次"]})]}),p.suggestions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm mb-2",children:"解决建议："}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:p.suggestions.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-xs mt-1",children:"•"}),(0,a.jsx)("span",{children:e})]},s))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[p.canRetry&&(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:w,disabled:!c||v>=3,children:[(0,a.jsx)(eq.A,{className:"size-4 mr-2"}),v>=3?"已达最大重试次数":"重试"]}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:k,children:"重新选择图片"}),(0,a.jsx)(l.$,{variant:"secondary",size:"sm",onClick:()=>{eL(),e([])},children:"手动输入食材"})]})]})})]})})}),(0,a.jsxs)(n.Zp,{className:"bg-blue-50 border-blue-200",children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"text-blue-800 flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"size-5"}),"功能特点"]})}),(0,a.jsx)(n.Wu,{className:"text-blue-700",children:(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"size-4 text-blue-600"}),"支持JPG、PNG、WebP格式图片"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"size-4 text-blue-600"}),"自动压缩优化，提升识别速度"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"size-4 text-blue-600"}),"AI智能识别，支持多种食材"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"size-4 text-blue-600"}),"可编辑结果，确保准确性"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"size-4 text-blue-600"}),"一键生成菜谱，省时省力"]})]})})]})]})}var eH=t(8559),eV=t(5814),eX=t.n(eV);function eJ(){let[e,s]=(0,r.useState)([]),[t,o]=(0,r.useState)({dietaryRestrictions:[],cuisineType:[],cookingTime:30,servings:2,difficulty:"easy",allergies:[]}),[d,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),[g,j]=(0,r.useState)(null),[f,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[w,A]=(0,r.useState)(!1),k=(0,i.useRouter)(),z=async()=>{let s;if(0===e.length)return void p("请至少添加一种食材");if(!b)return void p("要生成个性化菜谱，需要配置AI服务。点击右上角按钮进行配置。");u(!0),p(null);try{let a=(0,ep.hasAnyAPIKey)()?(0,ep.getStoredAPIKeys)():void 0,r=(0,ep.getPreferredRecipeProvider)(),i=new AbortController;s=setTimeout(()=>{i.signal.aborted||i.abort("Request timeout")},12e4);let n=await fetch("/api/generate-recipe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:e,preferences:t,preferredProvider:r,apiKeys:a?{deepseek:a.deepseek,doubao:a.doubao?{key:a.doubao,endpointId:a.doubaoEndpointId}:void 0,qwen:a.qwen,glm:a.glm,gemini:a.gemini}:void 0}),signal:i.signal});if(s&&clearTimeout(s),!n.ok){let e=await n.json();throw Error(e.error||"生成菜谱失败")}let l=await n.json();if(l.success&&l.data&&l.data.recipe)localStorage.setItem("currentRecipe",JSON.stringify(l.data.recipe)),localStorage.setItem("recipeIngredients",JSON.stringify(e)),localStorage.setItem("recipePreferences",JSON.stringify(t)),k.push("/recipe");else throw console.error("数据结构错误:",l),Error(l.error||"未收到有效的菜谱数据")}catch(s){console.error("生成菜谱失败:",s);let e="生成菜谱失败，请重试";s instanceof Error&&("AbortError"===s.name||s.message.includes("aborted")?e="请求超时，AI服务响应较慢，请稍后重试":s.message.includes("timeout")?e="请求超时，请检查网络连接后重试":(s.message.includes("API"),e=s.message)),p(e)}finally{s&&clearTimeout(s),u(!1)}},S=e.length>0&&!d;return w?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50",children:[(0,a.jsx)("header",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,a.jsxs)(eX(),{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,a.jsx)(eH.A,{className:"size-5"}),(0,a.jsx)(m.A,{className:"size-6 text-orange-500"}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"RecipeGenius"})]}),(0,a.jsx)(eh,{onOpenSettings:()=>v(!0)})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 pb-8 max-w-4xl",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4 text-gray-900",children:"告诉我你有什么食材"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"拍照识别或手动输入你现有的食材，设置你的偏好，让AI为你创造美味菜谱"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eT,{className:"size-4 text-blue-500"}),(0,a.jsx)("span",{children:"AI图片识别"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"✏️"}),(0,a.jsx)("span",{children:"手动输入"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"size-4 text-orange-500"}),(0,a.jsx)("span",{children:"智能生成"})]})]})]}),(0,a.jsxs)(c.tU,{defaultValue:"image-recognition",className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-3 max-w-lg mx-auto",children:[(0,a.jsxs)(c.Xi,{value:"image-recognition",className:"flex items-center gap-2",children:[(0,a.jsx)(eT,{className:"size-4"}),"图片识别"]}),(0,a.jsx)(c.Xi,{value:"ingredients",className:"flex items-center gap-2",children:"\uD83E\uDD55 手动输入"}),(0,a.jsx)(c.Xi,{value:"preferences",className:"flex items-center gap-2",children:"⚙️ 偏好设置"})]}),(0,a.jsx)(c.av,{value:"ingredients",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-xl",children:"手动添加食材"}),(0,a.jsx)(n.BT,{children:"输入你现有的食材，我们会为你推荐最佳的搭配方案"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(N,{onIngredientsChange:s,initialIngredients:e})})]})}),(0,a.jsx)(c.av,{value:"image-recognition",children:(0,a.jsx)(eF,{onIngredientsConfirmed:t=>{let a=[...e],r=0;t.forEach(e=>{!a.includes(e)&&(a.push(e),r++)}),s(a),p(null),j(r>0?`成功识别并添加了 ${r} 种食材！您可以在"手动输入"标签页查看和编辑。`:"识别完成！所有食材都已在列表中。"),setTimeout(()=>j(null),5e3)}})}),(0,a.jsx)(c.av,{value:"preferences",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-xl",children:"个性化设置"}),(0,a.jsx)(n.BT,{children:"根据你的需求定制菜谱，让AI生成最适合你的方案"})]})}),(0,a.jsx)(ed,{onPreferencesChange:o,initialPreferences:t})]})})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-4",children:[g&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-green-700 text-sm",children:g})}),x&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-red-700 text-sm",children:x}),x.includes("API密钥")&&(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"mt-2 text-red-700 border-red-300 hover:bg-red-50",children:[(0,a.jsx)(eu.A,{className:"size-4 mr-2"}),"配置API密钥"]})]}),(0,a.jsx)(n.Zp,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white border-0",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"准备好了吗？"}),(0,a.jsx)("p",{className:"opacity-90",children:e.length>0?`已添加 ${e.length} 种食材，点击生成专属菜谱`:"请先添加一些食材"})]}),(0,a.jsx)(l.$,{onClick:()=>{z()},disabled:!S,size:"lg",variant:"secondary",className:"text-lg px-8 py-4 font-semibold","data-generate-button":!0,children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eD.A,{className:"mr-2 size-5 animate-spin"}),"AI正在创作中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 size-5"}),"生成我的专属菜谱"]})}),e.length>0&&(0,a.jsx)("div",{className:"text-sm opacity-75",children:"预计生成时间：5-10秒"})]})})})]}),(0,a.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 小贴士：添加更多食材可以获得更丰富的菜谱选择"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"\uD83D\uDCF8 支持拍照识别食材 | ✏️ 支持手动输入 | \uD83E\uDD16 AI智能推荐"})]})]}),(0,a.jsx)(em.$,{isOpen:f,onClose:()=>v(!1),onKeysUpdated:()=>{y((0,ep.hasAnyAPIKey)()),p(null)}})]}):null}},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[447,985,767,627,408,409],()=>t(7282));module.exports=a})();