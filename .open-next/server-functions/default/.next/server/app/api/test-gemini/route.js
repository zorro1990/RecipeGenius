(()=>{var e={};e.id=282,e.ids=[282],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},8381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>d,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{GET:()=>u});var n=s(6559),i=s(8088),o=s(7719),a=s(2190);async function u(){try{let e=process.env.GOOGLE_API_KEY;if(!e||"your_gemini_api_key_here"===e)return a.NextResponse.json({success:!1,error:"API密钥未配置或使用默认值",details:"请在.env.local文件中设置正确的GOOGLE_API_KEY",apiKeyLength:e?e.length:0,apiKeyPrefix:e?e.substring(0,10)+"...":"none"},{status:500});if(!e.startsWith("AIza"))return a.NextResponse.json({success:!1,error:"API密钥格式不正确",details:'Google API密钥应该以"AIza"开头',apiKeyPrefix:e.substring(0,10)+"..."},{status:500});try{let{GoogleGenerativeAI:t}=await s.e(449).then(s.bind(s,7449)),r=new t(e);try{let e=r.getGenerativeModel({model:"gemini-1.5-flash"}),t=(await e.generateContent("Hello")).response.text();return a.NextResponse.json({success:!0,message:"Gemini API连接成功",response:t,apiKeyStatus:"有效",model:"gemini-1.5-flash"})}catch(e){try{let e=r.getGenerativeModel({model:"gemini-pro"}),t=(await e.generateContent("Hello")).response.text();return a.NextResponse.json({success:!0,message:"Gemini API连接成功（使用备用模型）",response:t,apiKeyStatus:"有效",model:"gemini-pro"})}catch(t){throw e}}}catch(r){console.error("Gemini API错误:",r);let t=r.message||"未知错误",s=[];return t.includes("API_KEY_INVALID")?s.push("API密钥无效，请检查密钥是否正确"):t.includes("PERMISSION_DENIED")?s.push("权限被拒绝，请检查API密钥权限"):t.includes("QUOTA_EXCEEDED")?s.push("API配额已用完，请检查使用限制"):t.includes("fetch failed")&&(s.push("网络连接失败，请检查网络连接"),s.push("可能是防火墙或代理问题")),a.NextResponse.json({success:!1,error:"Gemini API调用失败",details:t,suggestions:s,apiKeyStatus:"已配置但可能无效",apiKeyLength:e.length,apiKeyPrefix:e.substring(0,10)+"..."},{status:500})}}catch(e){return console.error("测试API错误:",e),a.NextResponse.json({success:!1,error:"测试失败",details:e instanceof Error?e.message:"未知错误"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/test-gemini/route",pathname:"/api/test-gemini",filename:"route",bundlePath:"app/api/test-gemini/route"},resolvedPagePath:"/Users/zorro/Documents/augment-projects/cooker/recipe-genius/app/api/test-gemini/route.ts",nextConfigOutput:"standalone",userland:r}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:d}=p;function g(){return(0,o.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,580],()=>s(8381));module.exports=r})();